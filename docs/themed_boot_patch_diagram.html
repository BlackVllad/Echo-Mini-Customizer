<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Echo Mini ‚Äî Themed Boot Patch Diagram</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: #1a1a1e;
    color: #e0e0e0;
    font-family: 'Segoe UI', Arial, sans-serif;
    padding: 32px 24px;
    min-width: 920px;
  }
  h1 { text-align:center; font-size:1.6rem; color:#fff; margin-bottom:4px; letter-spacing:1px; }
  .subtitle { text-align:center; color:#666; font-size:0.82rem; margin-bottom:36px; }

  .section-title {
    font-size:0.72rem; font-weight:700; letter-spacing:2px;
    text-transform:uppercase; color:#555; margin-bottom:12px;
    border-left:3px solid #2a82da; padding-left:10px;
  }
  hr { border:none; border-top:1px solid #252530; margin:36px 0; }

  /* ‚îÄ‚îÄ Two-column compare ‚îÄ‚îÄ */
  .compare {
    display:grid; grid-template-columns:1fr 56px 1fr;
    gap:0; align-items:start; margin-bottom:8px;
  }
  .arrow-col {
    display:flex; flex-direction:column;
    align-items:center; justify-content:center; padding-top:70px;
  }
  .big-arrow { font-size:2rem; color:#2a82da; animation:pulse 2s infinite; }
  .arrow-label { font-size:0.68rem; color:#2a82da; font-weight:700; margin-top:4px; letter-spacing:1px; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.35} }

  /* ‚îÄ‚îÄ Resource table bars ‚îÄ‚îÄ */
  .table-label { font-size:0.7rem; font-weight:700; color:#999; margin-bottom:8px; }
  .res-table {
    display:flex; width:100%; border-radius:6px; overflow:hidden;
    border:1px solid #2a2a35; height:54px;
  }
  .rb {
    display:flex; align-items:center; justify-content:center;
    flex-direction:column; font-size:0.65rem; font-weight:700;
    color:#fff; border-right:1px solid rgba(0,0,0,0.25);
    padding:3px 2px; text-align:center; line-height:1.3;
  }
  .rb:last-child { border-right:none; }
  .rb .n { font-size:0.58rem; opacity:0.7; margin-top:2px; }

  .cs  { background:#5b4fcf; }
  .cA  { background:#1d6fa4; }
  .cB  { background:#1a7a4a; }
  .cC  { background:#7a4a1a; }
  .cD  { background:#7a1a3a; }
  .cE  { background:#4a1a7a; }
  .cbB { background:#236b36; }
  .cbC { background:#6b4a16; }
  .cbD { background:#6b1630; }
  .cbE { background:#36166b; }

  .table-note { font-size:0.68rem; color:#555; margin-top:8px; line-height:1.5; }

  /* ‚îÄ‚îÄ Legend ‚îÄ‚îÄ */
  .legend { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:36px; }
  .li { display:flex; align-items:center; gap:6px; font-size:0.7rem; color:#888; }
  .ld { width:13px; height:13px; border-radius:3px; flex-shrink:0; }

  /* ‚îÄ‚îÄ ARM code boxes ‚îÄ‚îÄ */
  .code-compare { display:grid; grid-template-columns:1fr 56px 1fr; gap:0; margin-bottom:36px; align-items:start; }
  .code-box {
    background:#0d0d14; border:1px solid #2a2a35; border-radius:8px;
    padding:16px; font-family:'Consolas','Courier New',monospace; font-size:0.78rem;
  }
  .code-box .line { margin:2px 0; }
  .cmt  { color:#4a6a4a; }
  .red  { color:#ff5555; font-weight:700; }
  .grn  { color:#55ff88; font-weight:700; }
  .blu  { color:#55aaff; }
  .gld  { color:#ffcc44; }
  .dim  { color:#444; }

  /* ‚îÄ‚îÄ Steps ‚îÄ‚îÄ */
  .steps { display:grid; grid-template-columns:repeat(5,1fr); gap:12px; margin-bottom:36px; }
  .step { background:#22222c; border:1px solid #2a2a35; border-radius:8px; padding:14px 12px; position:relative; }
  .step-num {
    position:absolute; top:-11px; left:12px;
    background:#2a82da; color:#fff; font-size:0.68rem; font-weight:700;
    border-radius:10px; padding:2px 8px; letter-spacing:1px;
  }
  .step.skipped { border-color:#444; opacity:0.45; }
  .step.skipped .step-num { background:#555; }
  .step h3 { font-size:0.76rem; color:#fff; margin:6px 0 7px; }
  .step p  { font-size:0.7rem; color:#888; line-height:1.5; }
  .mono {
    font-family:monospace; font-size:0.68rem; background:#13131c;
    border-radius:4px; padding:4px 7px; margin-top:6px;
    display:block; color:#7cf; line-height:1.5;
  }
  .badge-skip {
    display:inline-block; background:#3a2a2a; color:#ff6666;
    font-size:0.6rem; border-radius:4px; padding:1px 6px;
    margin-top:5px; font-weight:700; letter-spacing:1px;
  }
  .badge-ok {
    display:inline-block; background:#1a3a1a; color:#55ff88;
    font-size:0.6rem; border-radius:4px; padding:1px 6px;
    margin-top:5px; font-weight:700; letter-spacing:1px;
  }

  /* ‚îÄ‚îÄ Naming grid ‚îÄ‚îÄ */
  .naming-grid { display:grid; grid-template-columns:repeat(5,1fr); gap:10px; margin-bottom:36px; }
  .theme-card { background:#22222c; border-radius:8px; overflow:hidden; border:1px solid #2a2a35; }
  .theme-card .th-hd { padding:8px 10px; font-size:0.76rem; font-weight:700; color:#fff; }
  .theme-card .th-bd { padding:8px 10px; font-size:0.67rem; font-family:monospace; color:#aaa; line-height:1.9; }
  .theme-card .th-bd span { color:#55ff88; }

  /* ‚îÄ‚îÄ Offset table ‚îÄ‚îÄ */
  .math-table { width:100%; border-collapse:collapse; font-size:0.77rem; margin-bottom:8px; }
  .math-table th {
    background:#202028; color:#777; font-size:0.67rem;
    letter-spacing:1px; text-transform:uppercase;
    padding:8px 12px; text-align:left; border-bottom:1px solid #2a2a35;
  }
  .math-table td { padding:8px 12px; border-bottom:1px solid #1e1e28; font-family:monospace; }
  .math-table tr:hover td { background:#1c1c26; }
  .del  { color:#ff5555; text-decoration:line-through; opacity:0.65; }
  .add  { color:#55ff88; }
  .neut { color:#888; }

  /* ‚îÄ‚îÄ Integrity ‚îÄ‚îÄ */
  .integrity { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:36px; }
  .int-card { background:#1a1a24; border:1px solid #2a2a35; border-radius:8px; padding:14px; position:relative; }
  .int-card.active  { border-color:#2a82da55; }
  .int-card.removed { opacity:0.35; border-style:dashed; }
  .int-card h4 { font-size:0.74rem; margin-bottom:6px; }
  .int-card.active  h4 { color:#2a82da; }
  .int-card.removed h4 { color:#666; }
  .int-card p  { font-size:0.69rem; color:#777; line-height:1.5; }
  .int-card .addr { font-family:monospace; color:#ffcc44; font-size:0.7rem; margin-top:5px; display:block; }
  .removed-tag {
    position:absolute; top:8px; right:8px;
    background:#3a1a1a; color:#ff5555; font-size:0.6rem;
    padding:1px 7px; border-radius:4px; font-weight:700; letter-spacing:1px;
  }
  .kept-tag {
    position:absolute; top:8px; right:8px;
    background:#1a3a1a; color:#55ff88; font-size:0.6rem;
    padding:1px 7px; border-radius:4px; font-weight:700; letter-spacing:1px;
  }

  /* ‚îÄ‚îÄ Result ‚îÄ‚îÄ */
  .result-banner {
    background:linear-gradient(135deg,#181f18,#141c26);
    border:1px solid #2a2a35; border-left:4px solid #55ff88;
    border-radius:8px; padding:18px 20px;
    display:grid; grid-template-columns:1fr 1fr; gap:20px;
  }
  .result-col h4 { font-size:0.78rem; margin-bottom:10px; }
  .result-col ul { list-style:none; }
  .result-col ul li {
    font-size:0.73rem; color:#ccc; padding:3px 0 3px 18px; position:relative;
  }
  .result-col ul li::before { content:"‚úì"; position:absolute; left:0; color:#55ff88; }
  .result-col.right h4 { color:#ffcc44; }
  .result-col.right ul li::before { content:"‚Üí"; color:#ffcc44; }
  .result-col.left h4  { color:#55ff88; }

  /* ‚îÄ‚îÄ Verified box ‚îÄ‚îÄ */
  .verified {
    background:#131c13; border:1px solid #2a6a2a;
    border-radius:8px; padding:14px 18px; margin-top:12px;
    font-size:0.75rem; color:#aaa;
  }
  .verified strong { color:#55ff88; }
  .verified .vline { margin:2px 0; font-family:monospace; font-size:0.72rem; color:#7cf; }
</style>
</head>
<body>

<h1>Echo Mini ‚Äî Themed Boot Patch</h1>
<p class="subtitle">Boot y apagado personalizados por tema ¬∑ CRC32 removido (no verificado por el device)</p>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">1 ¬∑ Tabla de recursos ‚Äî Antes vs Despu√©s</div>

<div class="compare">
  <div>
    <div class="table-label">‚ùå ANTES ‚Äî 1,602 entradas (firmware original)</div>
    <div class="res-table">
      <div class="rb cs" style="flex:67">üîí SHARED<div class="n">67</div></div>
      <div class="rb cA" style="flex:307">Tema A<div class="n">307</div></div>
      <div class="rb cB" style="flex:307">Tema B<div class="n">307</div></div>
      <div class="rb cC" style="flex:307">Tema C<div class="n">307</div></div>
      <div class="rb cD" style="flex:307">Tema D<div class="n">307</div></div>
      <div class="rb cE" style="flex:307">Tema E<div class="n">307</div></div>
    </div>
    <p class="table-note">
      üîí Los 67 recursos boot (POWERON, POWEROFF, CHARGELEVEL) son <strong style="color:#ff5555">compartidos</strong> entre todos los temas.<br>
      El firmware hace <code style="color:#ff5555">CMP R0, #0x43</code> ‚Üí si √≠ndice &lt; 67 siempre usa el bloque shared.
    </p>
  </div>

  <div class="arrow-col">
    <div class="big-arrow">‚Üí</div>
    <div class="arrow-label">PATCH</div>
  </div>

  <div>
    <div class="table-label">‚úÖ DESPU√âS ‚Äî 1,870 entradas (parchado)</div>
    <div class="res-table">
      <div class="rb cs"  style="flex:67">Boot A<div class="n">67</div></div>
      <div class="rb cA"  style="flex:307">UI A<div class="n">307</div></div>
      <div class="rb cbB" style="flex:67">Boot B<div class="n">67</div></div>
      <div class="rb cB"  style="flex:307">UI B<div class="n">307</div></div>
      <div class="rb cbC" style="flex:67">Boot C<div class="n">67</div></div>
      <div class="rb cC"  style="flex:307">UI C<div class="n">307</div></div>
      <div class="rb cbD" style="flex:67">Boot D<div class="n">67</div></div>
      <div class="rb cD"  style="flex:307">UI D<div class="n">307</div></div>
      <div class="rb cbE" style="flex:67">Boot E<div class="n">67</div></div>
      <div class="rb cE"  style="flex:307">UI E<div class="n">307</div></div>
    </div>
    <p class="table-note">
      ‚úÖ Cada tema tiene su propio bloque de <strong style="color:#55ff88">374 entradas</strong> (67 boot + 307 UI).<br>
      <code style="color:#55ff88">CMP R0, #0x00</code> ‚Üí la condici√≥n nunca se cumple ‚Üí cada tema usa sus propias im√°genes de boot.
    </p>
  </div>
</div>

<div class="legend" style="margin-top:14px">
  <div class="li"><div class="ld" style="background:#5b4fcf"></div>Shared original / Boot A</div>
  <div class="li"><div class="ld" style="background:#1d6fa4"></div>UI Tema A</div>
  <div class="li"><div class="ld" style="background:#236b36"></div>Boot B (T_B_*)</div>
  <div class="li"><div class="ld" style="background:#1a7a4a"></div>UI Tema B</div>
  <div class="li"><div class="ld" style="background:#6b4a16"></div>Boot C (T_C_*)</div>
  <div class="li"><div class="ld" style="background:#7a4a1a"></div>UI Tema C</div>
  <div class="li"><div class="ld" style="background:#6b1630"></div>Boot D (T_D_*)</div>
  <div class="li"><div class="ld" style="background:#36166b"></div>Boot E (T_E_*)</div>
</div>

<hr>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">2 ¬∑ C√≥digo ARM Thumb2 ‚Äî Instrucciones parcheadas</div>

<div class="code-compare">
  <div>
    <div class="table-label">‚ùå ANTES ‚Äî Todos los temas comparten boot</div>
    <div class="code-box">
      <div class="line cmt">; Selecci√≥n de recurso de boot por tema:</div>
      <div class="line">MOV  R0, <span class="blu">theme_resource_index</span></div>
      <div class="line"></div>
      <div class="line cmt">; ¬ø√çndice en zona shared (< 67)?</div>
      <div class="line"><span class="red">CMP  R0, #0x43</span>     <span class="cmt">; 0x43 = 67 decimal</span></div>
      <div class="line"><span class="red">BLT  use_shared</span>     <span class="cmt">; √≠ndice 0-66 ‚Üí shared</span></div>
      <div class="line"></div>
      <div class="line cmt">; Offset de bloque (307 por tema)</div>
      <div class="line">ADDW R0, R0, <span class="gld">#307</span>   <span class="cmt">; Tema 1</span></div>
      <div class="line">ADDW R0, R0, <span class="gld">#614</span>   <span class="cmt">; Tema 2</span></div>
      <div class="line">ADDW R0, R0, <span class="gld">#921</span>   <span class="cmt">; Tema 3</span></div>
      <div class="line">ADDW R0, R0, <span class="gld">#1228</span>  <span class="cmt">; Tema 4</span></div>
      <div class="line"></div>
      <div class="line"><span class="red">use_shared:</span>          <span class="cmt">; ‚Üê todos los boots llegan ac√°</span></div>
      <div class="line cmt">  ; mismo POWERON para todos los temas üòû</div>
    </div>
  </div>

  <div class="arrow-col" style="padding-top:55px">
    <div class="big-arrow">‚Üí</div>
    <div class="arrow-label">PATCH</div>
  </div>

  <div>
    <div class="table-label">‚úÖ DESPU√âS ‚Äî Boot independiente por tema</div>
    <div class="code-box">
      <div class="line cmt">; Selecci√≥n de recurso de boot por tema:</div>
      <div class="line">MOV  R0, <span class="blu">theme_resource_index</span></div>
      <div class="line"></div>
      <div class="line cmt">; Condici√≥n R0 &lt; 0 ‚Üí NUNCA verdadera</div>
      <div class="line"><span class="grn">CMP  R0, #0x00</span>     <span class="cmt">; ‚Üê 1 byte cambiado</span></div>
      <div class="line"><span class="dim">BLT  use_shared</span>     <span class="cmt">; rama muerta (nunca se toma)</span></div>
      <div class="line"></div>
      <div class="line cmt">; Offset actualizado (374 = 307 + 67 boot)</div>
      <div class="line">ADDW R0, R0, <span class="grn">#374</span>   <span class="cmt">; Tema 1</span></div>
      <div class="line">ADDW R0, R0, <span class="grn">#748</span>   <span class="cmt">; Tema 2</span></div>
      <div class="line">ADDW R0, R0, <span class="grn">#1122</span>  <span class="cmt">; Tema 3</span></div>
      <div class="line">ADDW R0, R0, <span class="grn">#1496</span>  <span class="cmt">; Tema 4</span></div>
      <div class="line"></div>
      <div class="line dim">use_shared:          <span class="cmt">; c√≥digo muerto</span></div>
      <div class="line cmt">  ; cada tema usa su propio boot üéâ</div>
    </div>
  </div>
</div>

<hr>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">3 ¬∑ Pasos del parche</div>

<div class="steps">
  <div class="step">
    <div class="step-num">PASO 1</div>
    <h3>üìã Leer shared</h3>
    <p>Lee los primeros 67 recursos (ROCK26 + metadata): POWERON*, POWEROFF*, CHARGELEVEL*‚Ä¶</p>
    <code class="mono">shared_r26[0..66]<br>shared_meta[0..66]</code>
    <span class="badge-ok">ACTIVO</span>
  </div>
  <div class="step">
    <div class="step-num">PASO 2</div>
    <h3>üìê Expandir tabla √ó5</h3>
    <p>Crea 5 copias del bloque (67 boot + 307 UI). Prefija boot de temas B‚ÄìE con <code>T_X_</code>.</p>
    <code class="mono">T_B_Z_POWERON0<br>T_C_CHARGELEVEL3<br>T_D_POWEROFF‚Ä¶</code>
    <span class="badge-ok">ACTIVO</span>
  </div>
  <div class="step">
    <div class="step-num">PASO 3</div>
    <h3>‚úèÔ∏è Parchear CMP</h3>
    <p>Un byte en el loader ARM. Cambia el umbral a 0x00 para que la condici√≥n nunca se cumpla.</p>
    <code class="mono">0x2843 ‚Üí 0x2800<br>offset: 0x3DF5A</code>
    <span class="badge-ok">ACTIVO</span>
  </div>
  <div class="step">
    <div class="step-num">PASO 4</div>
    <h3>üî¢ Recodificar ADDWs</h3>
    <p>Los 4 ADDW Thumb2 se reescriben con los nuevos offsets de bloque (√ó374 en lugar de √ó307).</p>
    <code class="mono">307‚Üí374<br>614‚Üí748<br>921‚Üí1122<br>1228‚Üí1496</code>
    <span class="badge-ok">ACTIVO</span>
  </div>
  <div class="step">
    <div class="step-num">PASO 5</div>
    <h3>üõ°Ô∏è Fix m√≠nimo</h3>
    <p>Solo actualiza <code>fw_end</code> y copia header al final. CRC32 y truncado eliminados.</p>
    <code class="mono">0x1F4 ‚Üê nuevo fw_end<br>header copy (0x200)</code>
    <span class="badge-ok">SIMPLIFICADO</span>
  </div>
</div>

<hr>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">4 ¬∑ Nombres de recursos por tema (despu√©s del parche)</div>

<div class="naming-grid">
  <div class="theme-card">
    <div class="th-hd" style="background:#1c3350">üé® Tema A ‚Äî Elegant White</div>
    <div class="th-bd">
      <span>Z_POWERON0_(0,0).BMP</span><br>
      <span>Z_POWERON1_(0,0).BMP</span><br>
      <span>POWEROFF_(0,0).BMP</span><br>
      <span>CHARGELEVEL3_(0,0).BMP</span><br>
      <small style="color:#444">sin prefijo</small>
    </div>
  </div>
  <div class="theme-card">
    <div class="th-hd" style="background:#1a3326">üé® Tema B ‚Äî Midnight Black</div>
    <div class="th-bd">
      T_B_<span>Z_POWERON0_(0,0).BMP</span><br>
      T_B_<span>Z_POWERON1_(0,0).BMP</span><br>
      T_B_<span>POWEROFF_(0,0).BMP</span><br>
      T_B_<span>CHARGELEVEL3_(0,0).BMP</span><br>
      <small style="color:#444">prefijo T_B_</small>
    </div>
  </div>
  <div class="theme-card">
    <div class="th-hd" style="background:#33261a">üé® Tema C ‚Äî Cherry Blossom</div>
    <div class="th-bd">
      T_C_<span>Z_POWERON0_(0,0).BMP</span><br>
      T_C_<span>Z_POWERON1_(0,0).BMP</span><br>
      T_C_<span>POWEROFF_(0,0).BMP</span><br>
      T_C_<span>CHARGELEVEL3_(0,0).BMP</span><br>
      <small style="color:#444">prefijo T_C_</small>
    </div>
  </div>
  <div class="theme-card">
    <div class="th-hd" style="background:#331a26">üé® Tema D ‚Äî Sky Blue</div>
    <div class="th-bd">
      T_D_<span>Z_POWERON0_(0,0).BMP</span><br>
      T_D_<span>Z_POWERON1_(0,0).BMP</span><br>
      T_D_<span>POWEROFF_(0,0).BMP</span><br>
      T_D_<span>CHARGELEVEL3_(0,0).BMP</span><br>
      <small style="color:#444">prefijo T_D_</small>
    </div>
  </div>
  <div class="theme-card">
    <div class="th-hd" style="background:#261a33">üé® Tema E ‚Äî Retro Gold</div>
    <div class="th-bd">
      T_E_<span>Z_POWERON0_(0,0).BMP</span><br>
      T_E_<span>Z_POWERON1_(0,0).BMP</span><br>
      T_E_<span>POWEROFF_(0,0).BMP</span><br>
      T_E_<span>CHARGELEVEL3_(0,0).BMP</span><br>
      <small style="color:#444">prefijo T_E_</small>
    </div>
  </div>
</div>

<hr>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">5 ¬∑ C√°lculo de offsets ADDW</div>

<table class="math-table">
  <tr>
    <th>Tema</th><th>Nombre</th><th>ADDW antes</th><th>ADDW despu√©s</th>
    <th>F√≥rmula</th><th>Rango de boot</th>
  </tr>
  <tr>
    <td>A</td><td class="neut">Elegant White</td>
    <td class="neut">‚Äî base</td><td class="neut">‚Äî base</td>
    <td class="neut">0 √ó 374 = 0</td>
    <td class="add">√≠ndices 0 ‚Äì 66</td>
  </tr>
  <tr>
    <td>B</td><td class="neut">Midnight Black</td>
    <td><span class="del">#307</span></td><td><span class="add">#374</span></td>
    <td class="gld">1 √ó 374 = 374</td>
    <td class="add">√≠ndices 374 ‚Äì 440</td>
  </tr>
  <tr>
    <td>C</td><td class="neut">Cherry Blossom</td>
    <td><span class="del">#614</span></td><td><span class="add">#748</span></td>
    <td class="gld">2 √ó 374 = 748</td>
    <td class="add">√≠ndices 748 ‚Äì 814</td>
  </tr>
  <tr>
    <td>D</td><td class="neut">Sky Blue</td>
    <td><span class="del">#921</span></td><td><span class="add">#1122</span></td>
    <td class="gld">3 √ó 374 = 1122</td>
    <td class="add">√≠ndices 1122 ‚Äì 1188</td>
  </tr>
  <tr>
    <td>E</td><td class="neut">Retro Gold</td>
    <td><span class="del">#1228</span></td><td><span class="add">#1496</span></td>
    <td class="gld">4 √ó 374 = 1496</td>
    <td class="add">√≠ndices 1496 ‚Äì 1562</td>
  </tr>
</table>
<p style="font-size:0.7rem;color:#555;margin-top:-24px;margin-bottom:36px">
  <code style="color:#7cf">NEW_BLK = OLD_BLK (307) + SHARED (67) = 374</code>
  &nbsp;¬∑&nbsp;
  <code style="color:#7cf">offset_tema_N = N √ó 374</code>
</p>

<hr>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">6 ¬∑ Fix de integridad ‚Äî ¬øQu√© se mantiene y qu√© se elimin√≥?</div>

<div class="integrity">
  <div class="int-card active">
    <span class="kept-tag">ACTIVO</span>
    <h4>‚ë† fw_end pointer</h4>
    <p>Actualiza el puntero de fin de firmware para que el device ubique correctamente el final de Part5.</p>
    <span class="addr">0x1F4 ‚Üê nuevo fw_end<br>align: 0x10000 (64 KB)</span>
  </div>
  <div class="int-card removed">
    <span class="removed-tag">ELIMINADO</span>
    <h4>‚ë° Truncado de archivo</h4>
    <p>Redimensionaba el archivo al m√∫ltiplo de 1 MB + trailer. Peligroso si <code>fw_size</code> estaba mal: pod√≠a cortar firmware real.</p>
    <span class="addr" style="color:#666">del data[fw_size+4:]<br>ALIGN = 0x100000</span>
  </div>
  <div class="int-card active">
    <span class="kept-tag">ACTIVO</span>
    <h4>‚ë¢ Header copy</h4>
    <p>Copia los primeros 0x200 bytes (header) al offset fw_end. El bootloader RKnano lo necesita para arrancar.</p>
    <span class="addr">data[fw_end:fw_end+0x200]<br>= data[0x000:0x200]</span>
  </div>
  <div class="int-card removed">
    <span class="removed-tag">ELIMINADO</span>
    <h4>‚ë£ CRC32 Rockchip</h4>
    <p>El Echo Mini tiene checker CRC32 pero <strong style="color:#aaa">no est√° en uso</strong>. Calcularlo era innecesario y lento (loop Python sobre millones de bytes).</p>
    <span class="addr" style="color:#666">CRC_T[256] + loop<br>‚Üí echo_mini_customizer<br>.CRC32_BACKUP.py</span>
  </div>
</div>

<hr>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section-title">7 ¬∑ Resultado verificado</div>

<div class="result-banner">
  <div class="result-col left">
    <h4>üéâ Lo que el parche habilita</h4>
    <ul>
      <li>Animaci√≥n de encendido (Z_POWERON*) por tema</li>
      <li>Pantalla de apagado (POWEROFF*) por tema</li>
      <li>Animaci√≥n de carga (CHARGELEVEL*) por tema</li>
      <li>Reemplazable desde el Customizer independientemente</li>
      <li>Compatible con los 5 temas del firmware (A‚ÄìE)</li>
      <li>Header copy preservado para el bootloader</li>
    </ul>
  </div>
  <div class="result-col right">
    <h4>üìä N√∫meros exactos del parche</h4>
    <ul>
      <li>1 byte cambiado: CMP #0x43 ‚Üí #0x00 en 0x3DF5A</li>
      <li>4 instrucciones ADDW recodificadas (Thumb2)</li>
      <li>268 nuevas entradas (67 shared √ó 4 temas extra)</li>
      <li>1,602 ‚Üí 1,870 recursos totales (+16.7%)</li>
      <li>Bloque por tema: 307 ‚Üí 374 entradas</li>
      <li>CRC32 omitido (checker inactivo en Echo Mini)</li>
    </ul>
  </div>
</div>

<div class="verified">
  <strong>‚úÖ Verificado en prueba real (HIFIEC20.IMG ‚Äî firmware limpio)</strong><br>
  <div class="vline">Loaded:  1,602 resources  |  Is patched: False  |  ADDW: [307, 614, 921, 1228]</div>
  <div class="vline">Patched: 1,870 resources  |  Is patched: True   |  ADDW: [374, 748, 1122, 1496]</div>
  <div class="vline">detect_patch_info() confirma estado correcto antes y despu√©s del parche ‚úì</div>
</div>

<p style="text-align:center;margin-top:28px;font-size:0.65rem;color:#333">
  Echo Mini Customizer ¬∑ Themed Boot Patch Diagram v2 ¬∑ CRC32 removido
</p>

</body>
</html>
